import{_ as V}from"./AuthenticatedLayout-sE7ju3Ki.js";import{s as c,k as B,o as i,f as d,a as h,u as b,w as D,F as N,B as T,Z as O,b as t,n as g,t as l,g as m,C as U,d as p}from"./app-D5qXLsL1.js";import{C as $}from"./main-CigRavCU.js";import"./ApplicationLogo-DWAVLRf5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={key:0,class:"modal flex flex-col items-center"},P={class:"flex gap-5 mt-5"},R={class:"w-full p-10 mt-5 overflow-auto"},j={class:"capitalize text-2xl"},z={class:"w-full"},E={key:0,class:"divide-y divide-gray-200"},X=t("td",null,"ID:",-1),Y=t("td",null,"Billing Address:",-1),G=t("td",null,"Billing City:",-1),H=t("td",null,"Billing Company:",-1),K=t("td",null,"Billing Name:",-1),Z=t("td",null,"Email:",-1),J=t("td",null,"Created:",-1),Q=t("td",null,"Updated:",-1),W={key:1,class:"divide-y divide-gray-200"},q=t("td",null,"Acquirer Transaction Id:",-1),tt=t("td",null,"Channel:",-1),lt=t("td",null,"Merchand ID:",-1),et=t("td",null,"Message:",-1),nt=t("td",null,"Reference:",-1),at=t("td",null,"Status:",-1),st=t("td",null,"Type:",-1),ot=t("td",null,"Created:",-1),it=t("td",null,"Updated:",-1),dt=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Transactions",-1),ut={class:"py-12"},rt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ct={class:"flex justify-center"},_t={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},vt={class:"p-6 text-gray-900"},mt={class:"prevNext flex justify-center gap-5 mb-5"},ht={key:0,class:"text-center"},gt={key:1,class:"text-center"},pt={key:2,class:"table-auto min-w-full divide-y divide-gray-200"},yt=t("thead",null,[t("tr",null,[t("th",null,"FX"),t("th",null,"Acquirer"),t("th",null,"Merchant"),t("th",null,"Refundable"),t("th",null,"Transaction"),t("th",null,"Created")])],-1),ft={class:"divide-y divide-gray-200"},Ct={class:"flex flex-col"},xt=t("span",null,"Original Amount",-1),bt=t("span",null,"Original Currency",-1),kt=t("span",null,"Converted Amount",-1),wt=t("span",null,"Converted Currency",-1),Dt={class:"text-center uppercase"},Nt={class:"transactionId"},Tt=["onClick"],Bt={__name:"Transactions",setup($t){const o=c([]),_=c("2010-01-01"),v=c("2024-03-01"),u=c(!1),y=c(!1),r=c("client"),n=c({client:{},transaction:{}}),f=async s=>await T.post("/get-transactions",{fromDate:_.value,toDate:v.value,page:s}),S=async()=>{u.value=!0;const s=new Date(_.value),e=new Date(v.value);_.value=`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}-${s.getDate().toString().padStart(2,"0")}`,v.value=`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`,o.value=[];const a=await f(1);u.value=!1,o.value=a.data.data},F=async s=>{y.value=!0;const e=await T.post("/get-transaction",{transactionId:s});e.statusText==="OK"&&(n.value={client:e.data.data.customerInfo,transaction:e.data.data.transaction.merchant})},k=async s=>{if(s!=null){u.value=!0,o.value=[];const e=Number(s.substring(s.indexOf("page=")+5)),a=await f(e);u.value=!1,o.value=a.data.data}};return B(async()=>{u.value=!0;const s=await f(1);u.value=!1,o.value=s.data.data}),(s,e)=>(i(),d(N,null,[h(b(O),{title:"Reports"}),h(V,null,{header:D(()=>[dt]),default:D(()=>[y.value?(i(),d("div",L,[t("button",{onClick:e[0]||(e[0]=a=>y.value=!1),class:"absolute top-5 right-5"},"Close X"),t("ul",P,[t("li",{onClick:e[1]||(e[1]=a=>r.value="client"),class:g({active:r.value==="client"})},"Client",2),t("li",{onClick:e[2]||(e[2]=a=>r.value="transaction"),class:g({active:r.value==="transaction"})},"Transaction",2)]),t("div",R,[t("h2",j,l(r.value)+" Details",1),t("div",z,[r.value==="client"?(i(),d("table",E,[t("tr",null,[X,t("td",null,l(n.value.client.id),1)]),t("tr",null,[Y,t("td",null,l(n.value.client.billingAddress1),1)]),t("tr",null,[G,t("td",null,l(n.value.client.billingCity),1)]),t("tr",null,[H,t("td",null,l(n.value.client.billingCompany),1)]),t("tr",null,[K,t("td",null,l(n.value.client.billingFirstName)+" "+l(n.value.client.billingLastName),1)]),t("tr",null,[Z,t("td",null,l(n.value.client.email),1)]),t("tr",null,[J,t("td",null,l(n.value.client.created_at),1)]),t("tr",null,[Q,t("td",null,l(n.value.client.updated_at),1)])])):m("",!0),r.value==="transaction"?(i(),d("table",W,[t("tr",null,[q,t("td",null,l(n.value.transaction.acquirerTransactionId),1)]),t("tr",null,[tt,t("td",null,l(n.value.transaction.channel),1)]),t("tr",null,[lt,t("td",null,l(n.value.transaction.merchantId),1)]),t("tr",null,[et,t("td",null,l(n.value.transaction.message),1)]),t("tr",null,[nt,t("td",null,l(n.value.transaction.referenceNo),1)]),t("tr",null,[at,t("td",null,l(n.value.transaction.status),1)]),t("tr",null,[st,t("td",null,l(n.value.transaction.type),1)]),t("tr",null,[ot,t("td",null,l(n.value.transaction.created_at),1)]),t("tr",null,[it,t("td",null,l(n.value.transaction.updated_at),1)])])):m("",!0)])])])):m("",!0),t("div",ut,[t("div",rt,[t("div",ct,[h(b($),{format:"yyyy-MM-dd",modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=a=>_.value=a),placeholder:"Date From"},null,8,["modelValue"]),h(b($),{format:"yyyy-MM-dd",modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),placeholder:"Date To"},null,8,["modelValue"]),t("button",{onClick:S,class:"filter"},"Filter")]),t("div",_t,[t("div",vt,[t("ul",mt,[t("li",{onClick:e[5]||(e[5]=a=>k(o.value.prev_page_url)),class:g({disabled:!o.value.prev_page_url})},l("< Prev"),2),t("li",{onClick:e[6]||(e[6]=a=>k(o.value.next_page_url)),class:g({disabled:!o.value.next_page_url})},l("Next >"),2)]),u.value?(i(),d("div",ht,"...LOADING")):o.value.data?m("",!0):(i(),d("div",gt,"No Data")),o.value.data?(i(),d("table",pt,[yt,t("tbody",ft,[(i(!0),d(N,null,U(o.value.data,({fx:a,acquirer:C,merchant:x,refundable:A,transaction:w,created_at:I},M)=>(i(),d("tr",{key:M},[t("td",null,[t("ul",Ct,[t("li",null,[xt,p(": "+l(a.merchant.originalAmount),1)]),t("li",null,[bt,p(": "+l(a.merchant.originalCurrency),1)]),t("li",null,[kt,p(": "+l(a.merchant.convertedAmount),1)]),t("li",null,[wt,p(": "+l(a.merchant.convertedCurrency),1)])])]),t("td",null,l(C==null?void 0:C.name),1),t("td",null,l(x==null?void 0:x.name),1),t("td",Dt,l(A),1),t("td",Nt,[t("a",{onClick:St=>F(w.merchant.transactionId),class:"cursor-pointer"},l(w.merchant.transactionId),9,Tt)]),t("td",null,l(I),1)]))),128))])])):m("",!0)])])])])]),_:1})],64))}};export{Bt as default};
